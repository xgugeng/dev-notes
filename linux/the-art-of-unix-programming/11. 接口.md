<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
**Table of Contents**  *generated with [DocToc](https://github.com/thlorenz/doctoc)*

- [11.1 最小立异原则](#111%C2%A0%E6%9C%80%E5%B0%8F%E7%AB%8B%E5%BC%82%E5%8E%9F%E5%88%99)
- [11.3 接口设计评估](#113%C2%A0%E6%8E%A5%E5%8F%A3%E8%AE%BE%E8%AE%A1%E8%AF%84%E4%BC%B0)
- [11.4 CLI和可视接口的权衡](#114%C2%A0cli%E5%92%8C%E5%8F%AF%E8%A7%86%E6%8E%A5%E5%8F%A3%E7%9A%84%E6%9D%83%E8%A1%A1)
- [11.6 Unix接口设计模式](#116%C2%A0unix%E6%8E%A5%E5%8F%A3%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F)
- [导航](#%E5%AF%BC%E8%88%AA)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

一个程序的接口就是程序同人类用户以及其他程序通讯的方法的总和。

程序通常通过以下来源获得输入命令：

1. 程序标准输入端的数据和命令
2. 通过IPC的输入
3. 已知位置的文件和设备

程序也能够以同样的方式输出。

 

# 11.1 最小立异原则

少来标新立异，但也不是机械的保守主义。如果可能，尽量允许用户将接口功能委派给熟悉的程序来完成。不能委派时，那就效仿。

Unix的丰富接口风格：

- 面向行的
- 面向屏幕字符阵列的
- 基于X的

 

# 11.3 接口设计评估

**简洁** 一个事务处理需要的动作时间及复杂度有较低的上限。

**表现力** 可以触发相当广泛的行为。

**易用** 接口要求用户记忆的东西成反比。

**透明** 用户在使用接口时，几乎没有什么问题需要记忆。

**脚本能力** 容易为其他程序所用。

 

# 11.4 CLI和可视接口的权衡

CLI更具表现力和脚本化能力。但是需要费劲地记忆，透明度也低。

UI：易用，不能脚本化，处理规模大的问题需要机械性重复操作。

从长远来看，为了既能服务有经验的用户又能服务一般用户，既支持CLI又支持可视接口是必不可少的。

 

# 11.6 Unix接口设计模式

1. 过滤器模式

程序接受标准输入，转换为某种格式后，再输出到标准输出。过滤器是非交互的。

实例：grep，tr

原则：Postel原则，宽进严出；过滤的时候，不需要的信息也绝不丢弃；不增加无用数据。

2. Cantrip模式

程序没有输入，没有输出，只被调用一次，产生退出状态码。程序的行为只由启动条件来控制。

实例：clear，touch

3. 源模式

程序不需要输入，输出由启动条件决定

实例：ls，ps，who

4. 接收器模式

程序只接纳标准输入，而不产生标准输出。对输入的行为由启动条件决定。

实例：lpr

5. 编译器模式

程序既没有标准输入，也没有标准输出，但是会将错误发到标准错误端。

实例：gcc，gif2png，gzip

6. ed模式

程序具有很强的交互性。

实例：gdb，ftp，sh

7. Roguelike模式

运行在控制台的全屏、可视界面风格，但使用字符阵列显示，而非图形和鼠标界面。

实例：vim，emacs

8. 引擎和接口分离模式

模型、视图、控制器模式

几个变种：配置者/执行者组合（fetchmail/fetchmailconf），假脱机/守护进程组合（at/atd, lpr/lpd），驱动/引擎组合，客户端/服务器组合

9. CLI服务器模式

程序以前端模式出发时，有一个简单的CLI界面读取标准输入并写标准输出；以后台方式运行时，将stdin和stdout连接到专门的TCP/IP端口。

实例：POP, IMAP, SMTP, HTTP

10. 基于语言的接口模式

GUI前端同CLI微型语言后端结合，程序往往拥有一个的内嵌脚本语言。

沉默是金：喋喋不休的程序往往不能跟其他程序很好的合作，用户屏幕的纵向空间是宝贵的，垃圾信息对用户带宽的无谓消耗。

长时间的操作要提供进度条。

# 导航

[目录](README.md)

上一章：[10. 配置](10. 配置.md)

下一章：[12. 优化](12. 优化.md)

