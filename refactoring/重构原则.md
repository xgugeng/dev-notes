重构就是在不改变软件可观察行为的前提下改变其内部结构，以提高其可理解性，降低其修改成本。

如果你发现自己需要为程序增加一个特性understandability，而代码结构使你无法很方便地达成目的，那就应该重构了。Don't Repeat Yourself.

进行重构的第一个步骤永远是：*为即将修改的代码建立一组可靠的测试环境*。

重构技术就是以微小的步伐修改程序，如果你犯下错误，很容易便可发现它。

优秀的程序猿才能写出人类容易理解的代码：更改变量名是必要的。

# 重构原则

为何重构：重构改进软件设计，提高可理解性，帮助找到bug，提高编程速度。

何时重构：第一次做某事只管去做，第二次做类似的事情会产生反感，第三次在做类似的事情，重构吧！重构应该随时随地进行，不应该为了重构而重构。添加功能时，修补错误时，复审代码时。

*计算机科学的任何问题，都可以通过增加一个间接层类解决：允许逻辑共享、分开解释意图和实现、隔离变化、封装条件逻辑*。


重构的难题：数据库难以修改，修改接口，难以通过重构手法完成的设计改动。

何时不该重构：重构之前，代码必须能够在大部分情况下正常工作。重写或许比重构来得更划算。项目接近交付的时候，别重构了。

重构不能替代设计，重构带来的，是更简单的设计，同时又不失灵活性，这也降低了设计过程的难度。

重构与性能：编写快速软件的秘密就是，首先写出可调的软件，然后调整它以获得足够速度。编写快速软件的三种方法：
1. 时间预算法，
2. 持续关注法，
3. 在开发后期按照某个特定程序调整程序开发。

短期来看，重构的确可能使软件变慢，但是使优化阶段的软件性能调整变得更容易，最终还得到好的效果。
