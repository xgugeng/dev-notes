# 数组非指针

`int *x; int y[];`

第一条是int的指针，第二条声明y是一个int型数组，长度未确定，其存储在别处定义。

对数组的引用总是可以写成对指针的引用，所以很多人以为数组和指针可以互换。

 

# 声明和定义

定义是一种特殊的说明，它创建了一个对象；声明简单地说明了在其他地方创建的对象的名字，允许你使用这个名字。

一次定义，多次声明。

`extern`对象告诉编译器对象的类型和名字，而内存分配在别处进行。

X = Y; 符号X表示X所代表的地址，Y表示Y代表的地址的内容。左值在编译时可知，左值表示存储结果的地方，右值在运行时可知，表示Y的内容。

数组名是个左值，但不是可修改的左值。只能给可修改的东西赋值。

指针比数组灵活的多，在访问数组对象时，指针多了一次额外的提取。

数组：每个符号的地址在编译时可知。所以如果编译器需要一个地址来执行某种操作，它就可以直接进行操作，不需要增加指令取得具体的地址。

对于指针：必须在运行时取得它的当前值，然后解引用（作为以后查找的步骤之一）。

定义为指针，以数组方式使用：

1. 取得符号表中p的地址，提取存储于次数的指针
2. 把下标表示的偏移量与指针的值相加，产生一个地址
3. 访问上面这个地址，取得字符

| 指针               | 数组                |
| ---------------- | ----------------- |
| 保存数据的地址          | 保存数据              |
| 间接访问数据，先取得指针的内容  |                   |
| 常用于动态数据结构        | 常用于固定数目且数据类型相同的元素 |
| 相关函数为malloc，free | 隐式分配和删除           |
| 通常指向匿名数据         | 自身即为数据名           |

定义指针，编译器只分配指针本身的空间，不为指针指向的对象分配空间，除非是定义时赋给指针一个字符串常量进行初始化

但浮点数之类的常量分配不行！`float *ptr = 3.14f; //ERROR`

# 导航

[目录](README.md)

上一章：[3. 分析C语言的声明](3. 分析C语言的声明.md)

下一章：[5. 对链接的思考](5. 对链接的思考.md)